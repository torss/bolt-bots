(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["e9d015a0"],{"282c":function(e,t,a){"use strict";var r=a("5799"),s=a.n(r);s.a},2888:function(e,t,a){},5799:function(e,t,a){},"8b24":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"page flex column"},[a("div",{staticClass:"canvas-container"},[a("q-resize-observer",{ref:"resizeObserver",on:{resize:e.onResize}}),a("canvas",{ref:"canvas",staticClass:"canvas",on:{mousemove:e.onMousemove,mousedown:e.onMousedown}})],1),e.gameOver?a("CentralCover"):e.glos.game&&"playing"===e.glos.game.state&&e.glos.game.match.playerSelf.alive?a("CtrlFooter"):e._e()],1)},s=[],n=a("abf7"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footer flex row",on:{mousedown:e.onMousedown}},[a("draggable",{staticClass:"card-slots",attrs:{list:e.cardSlots,group:"bot-card-slots",move:e.checkCardMove},on:{end:e.onMouseup}},e._l(e.cardSlots,(function(t,r){return a("q-btn",{key:r,staticClass:"card",attrs:{push:!!t.card,color:e.cardSlotToColor(t,r===e.turnCardIndex),rounded:"","no-caps":"",disable:e.disableAct},on:{dragstart:function(a){return e.dragCard(t)},dragend:e.dragCardStop,drop:function(a){return e.dropCard(t)},click:function(a){return e.removeCard(t)}}},[t.card?[a("img",{attrs:{src:"statics/cards/"+t.card.cardType.key+".svg"}}),a("span",[e._v(e._s(t.card.cardType.title))])]:[a("span",{staticClass:"text-grey-8"},[e._v("Slot "+e._s(r+1))])]],2)})),1),a("div",{staticClass:"flex flex-center column"},[a("q-btn",{staticClass:"end-turn",attrs:{push:"",color:"white","text-color":"primary",round:"",size:"xl",disable:e.disableAct},on:{click:e.endTurn}},[e.turnTimerRunning?a("q-circular-progress",{attrs:{value:e.timeSec,max:e.durationSec,"show-value":"","track-color":"grey",color:"primary",size:"2.5em"}},[e._v("\n        "+e._s(e.timeSec.toFixed(0))+"s\n      ")]):a("q-icon",{attrs:{name:"arrow_right"}}),a("q-tooltip",[e._v("End turn.")])],1)],1)],1)},i=[],c=a("310e"),d=a.n(c),l=a("49ca"),u={name:"CtrlFooter",components:{draggable:d.a},data(){return{glos:n["a"]}},methods:{endTurn(){n["a"].game.endTurn()},onMousedown(){n["a"].threejsControls&&(n["a"].threejsControls.enabled=!1),document.addEventListener("mouseup",()=>this.onMouseup(),{once:!0})},onMouseup(){n["a"].threejsControls&&(n["a"].threejsControls.enabled=!0)},checkCardMove(e){return!1},cardSlotToColor(e,t){return e.card?t?"light-blue-6":"primary":t?"grey-3":void 0},dragCard(e){n["a"].dragged=e},dragCardStop(){n["a"].dragged=void 0},dropCard(e){if(!this.disableAct){if(n["a"].dragged instanceof l["b"]){const t=n["a"].dragged.card;n["a"].dragged.card=e.card,e.card=t}else n["a"].dragged instanceof l["a"]&&!e.card&&(e.card=n["a"].dragged,n["a"].dragged.removeFromHand());n["a"].dragged=void 0}},removeCard(e){const t=e.card;t&&(e.card=void 0,n["a"].hand.push(t))}},computed:{game(){return this.glos.game},match(){return this.game.match},cardSlots(){return this.glos.cardSlots},disableAct(){return this.match&&(this.match.turnInProgress||!!this.match.gameOver||this.match.playerSelf.endTurn||!this.alive)},turnCardIndex(){return this.match&&this.match.turnCardIndex},alive(){return this.match.playerSelf.alive},turnTimerRunning(){return this.game.turnTimer.running},timeSec(){return Math.max(this.durationSec-this.game.turnTimer.elapsedTime,0)},durationSec(){return this.game.netMatch.endTurnTimeLimit}},watch:{timeSec(e){e<=0&&this.turnTimerRunning&&!this.disableAct&&this.endTurn()}}},h=u,m=(a("cd5e"),a("2877")),g=Object(m["a"])(h,o,i,!1,null,"41f17066",null),v=g.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cover"},[a("span",{staticClass:"game-over"},[e._v("GAME OVER")]),a("q-btn",{attrs:{color:"accent",label:"Return to lobby",push:""},on:{click:e.returnToLobby}}),"draw"===e.gameOver?[a("span",{staticClass:"game-over-type"},[e._v("D R A W")]),a("span",{staticClass:"desc"},[e._v(e._s(e.selectQuip(e.drawQuips)))])]:"lms"===e.gameOver?[a("span",{staticClass:"game-over-type"},[e._v("LAST BOT STANDING")]),a("span",{staticClass:"desc"},[e._v(e._s(e.victors)+" wins "+e._s(e.selectQuip(e.lmsQuips)))])]:"checkpoint"===e.gameOver?[a("span",{staticClass:"game-over-type"},[e._v("CHECKPOINT")]),a("span",{staticClass:"desc"},[e._v(e._s(e.victors)+" wins "+e._s(e.selectQuip(e.checkpointQuips)))])]:e._e()],2)},b=[];const C=["Everybody died.","You are all dead. 🏆",". . .","What are you doing?!","Pathetic!","...how?","This isn't supposed to happen."],f=["by not dying!","by not exploding!","since everyone else exploded!","thanks to violence!","due to death and destruction!"],y=["by playing as intended!","via superior navigation!","fair and square!","with superb speed!","by running away!"];var w={name:"CentralCover",data(){return{drawQuips:C,lmsQuips:f,checkpointQuips:y,glos:n["a"]}},methods:{selectQuip(e){return e[Math.floor(this.match.gameOverQuip*e.length)]},returnToLobby(){this.glos.game.returnToLobby()}},computed:{match(){return this.glos.game.match},gameOver(){return this.match.gameOver},victors(){return this.match.victors.map(e=>e.name).join(" & ")}}},_=w,T=(a("ab90"),Object(m["a"])(_,p,b,!1,null,"7a74ee7a",null)),S=T.exports,x={name:"PageIndex",components:{CtrlFooter:v,CentralCover:S},data(){return{glos:n["a"]}},created(){this.$deinit=[],this.$onResize=[],this.$onMousemove=[],this.$onMousedown=[],this.$onWheel=[],this.$onKeydown=[]},mounted(){n["a"].init(this),document.addEventListener("wheel",this.onWheel,!0),document.addEventListener("keydown",this.onKeydown),this.onResize(this.$refs.resizeObserver.size)},beforeDestroy(){document.removeEventListener("wheel",this.onWheel,!0),document.removeEventListener("keydown",this.onKeydown),this.$deinit.forEach(e=>e())},methods:{onResize(e){this.$onResize.forEach(t=>t(e))},onMousemove(e){this.$onMousemove.forEach(t=>t(e))},onMousedown(e){this.$onMousedown.forEach(t=>t(e))},onWheel(e){this.$onWheel.forEach(t=>t(e))},onKeydown(e){this.$onKeydown.forEach(t=>t(e))}},computed:{gameOver(){return this.glos.game&&this.glos.game.match&&this.glos.game.match.gameOver}}},E=x,M=(a("282c"),Object(m["a"])(E,r,s,!1,null,"7aab21c0",null));t["default"]=M.exports},ab90:function(e,t,a){"use strict";var r=a("e26b"),s=a.n(r);s.a},cd5e:function(e,t,a){"use strict";var r=a("2888"),s=a.n(r);s.a},e26b:function(e,t,a){}}]);