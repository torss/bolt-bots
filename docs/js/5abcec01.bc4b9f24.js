(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["5abcec01"],{"07d4":function(t,e,a){t.exports=a.p+"img/boltbots-logo.3500425c.svg"},"50f4":function(t,e,a){"use strict";var s=a("cad7"),o=a.n(s);o.a},"546f":function(t,e,a){"use strict";var s=a("58c1"),o=a.n(s);o.a},"58c1":function(t,e,a){},"5b45":function(t,e,a){},"713b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{class:t.bgClassHeader,attrs:{elevated:""},on:{mousedown:t.onMousedown}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),s("q-toolbar-title",[t._v("\n        Bolt Bots\n        "),s("q-tooltip",[t._v("Running on Quasar v"+t._s(t.$q.version))])],1),"playing"!==t.game.state||this.match.gameOver?t._e():s("HoldBtn",{staticClass:"hold-btn",attrs:{incrementMs:3e3,color:"negative"},on:{trigger:t.leaveMatch}},[s("q-icon",{attrs:{name:"mdi-exit-run"}}),s("q-tooltip",[t._v("\n          Click and hold this button to irreversibly leave the match."),s("br"),t._v("\n          Hold "),s("kbd",[t._v("Shift")]),t._v(" to accelerate the invocation.\n        ")])],1),s("q-btn",{attrs:{icon:t.glos.muteAudio?"mdi-volume-off":"mdi-volume-high",flat:"",round:""},on:{click:t.toggleAudio}},[s("q-tooltip",[t._v("Toggle audio mute")])],1),s("span",{staticClass:"volume-slider"},[s("q-slider",{attrs:{min:0,max:200,color:"white"},model:{value:t.glos.masterVolume,callback:function(e){t.$set(t.glos,"masterVolume",e)},expression:"glos.masterVolume"}}),s("q-tooltip",[t._v("Master volume: "+t._s(t.glos.masterVolume)+"%")])],1),s("div",{ref:"toolbarStats",staticClass:"toolbarStats"}),s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"mdi-wan",color:t.game.newChatMessages?"pink":t.darkMode?"blue-grey-5":"blue-grey-2"},on:{click:t.toggleRightDrawer}})],1)],1),s("q-drawer",{attrs:{"no-swipe-close":"",behavior:"desktop","content-class":t.bgClassDrawer,elevated:""},nativeOn:{mousedown:function(e){return t.onMousedown(e)}},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[s("q-list",{staticClass:"drawer-list",attrs:{dark:t.darkMode}},[s("div",{staticClass:"drawer-head"},[s("div",{staticClass:"flex flex-center"},[s("img",{staticClass:"logo",attrs:{alt:"Bolt Bots logo",src:a("07d4")},on:{click:function(e){t.darkMode=!t.darkMode}}}),s("q-tooltip",[t._v("Click to toggle dark mode.")])],1),"playing"===t.game.state?[s("q-item-label",{staticClass:"text-center text-bold",attrs:{header:""}},[t._v("Turn "+t._s(t.turn))]),s("q-item-label",{attrs:{header:""}},[t._v("Players")]),s("q-list",{staticClass:"q-gutter-sm",on:{mousedown:t.onMousedown}},t._l(t.players,(function(e,a){return s("PlayerListItem",{key:a,attrs:{player:e},nativeOn:{click:function(a){return t.clickPlayer(e)}}})})),1),t.alive?[s("q-item-label",{attrs:{header:""}},[t._v("\n              Hand "+t._s(t.hand.length)+"/"+t._s(t.handSize)+"\n              "),s("q-tooltip",[t._v("You can hold at most "+t._s(t.handSize)+" cards.")])],1),s("q-list",{staticClass:"q-gutter-sm",on:{mousedown:t.onMousedown}},[s("q-tooltip",[t._v("Drag these cards onto the slots at the bottom to program your bot.")]),s("draggable",{staticClass:"card-slots q-gutter-sm justify-center row",attrs:{list:t.hand,group:"hand"},on:{end:t.onMouseup}},t._l(t.hand,(function(e,a){return s("q-btn",{key:a,staticClass:"card",attrs:{push:"",color:"primary","no-caps":"",draggable:"true",disable:t.disableAct},on:{click:function(a){return t.useCard(e)},dragstart:function(a){return t.dragCard(e)},dragend:t.dragCardStop}},[s("img",{attrs:{src:"statics/cards/"+e.cardType.key+".svg"}}),s("span",[t._v(t._s(e.cardType.title))])])})),1)],1)]:t._e(),t.deadPlayers.length>0?[s("q-item-label",{attrs:{header:""}},[t._v("Graveyard")]),s("q-list",{staticClass:"q-gutter-sm",on:{mousedown:t.onMousedown}},t._l(t.deadPlayers,(function(t,e){return s("PlayerListItem",{key:e,attrs:{player:t}})})),1)]:t._e()]:"matchmaking"===t.game.state?[s("q-item-label",{staticClass:"text-center text-bold",attrs:{header:""}},[t._v("Matchmaking")]),s("q-item",[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Player name",error:!t.playerNameValid},model:{value:t.playerName,callback:function(e){t.playerName=e},expression:"playerName"}})],1)],1),s("q-expansion-item",{attrs:{group:"matchmaking",label:"Host",dark:t.darkMode},model:{value:t.hostExpanded,callback:function(e){t.hostExpanded=e},expression:"hostExpanded"}},[s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Match name",error:!t.hostMatchNameValid},model:{value:t.hostMatchName,callback:function(e){t.hostMatchName=e},expression:"hostMatchName"}})],1)],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Password",error:!t.hostPasswordValid},model:{value:t.hostPassword,callback:function(e){t.hostPassword=e},expression:"hostPassword"}})],1)],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"End turn time limit",type:"number",error:!t.hostEndTurnTimeLimitValid,suffix:"s","input-class":"duration-input"},model:{value:t.hostEndTurnTimeLimit,callback:function(e){t.hostEndTurnTimeLimit=t._n(e)},expression:"hostEndTurnTimeLimit"}})],1),s("MatchmakingTooltip",{attrs:{type:"endTurnTimeLimit"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Max. players",type:"number",error:!t.hostMaxPlayersValid},model:{value:t.hostMaxPlayers,callback:function(e){t.hostMaxPlayers=t._n(e)},expression:"hostMaxPlayers"}})],1)],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Checkpoints",type:"number",error:!t.hostCheckpointCountValid},model:{value:t.hostCheckpointCount,callback:function(e){t.hostCheckpointCount=t._n(e)},expression:"hostCheckpointCount"}})],1),s("MatchmakingTooltip",{attrs:{type:"checkpointCount"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Hand size",type:"number",error:!t.hostHandSizeValid},model:{value:t.hostHandSize,callback:function(e){t.hostHandSize=t._n(e)},expression:"hostHandSize"}})],1),s("MatchmakingTooltip",{attrs:{type:"handSize"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Card slots",type:"number",error:!t.hostSlotCountValid},model:{value:t.hostSlotCount,callback:function(e){t.hostSlotCount=t._n(e)},expression:"hostSlotCount"}})],1),s("MatchmakingTooltip",{attrs:{type:"slotCount"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Seed"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.regenerateMap(e)}},model:{value:t.hostSeed,callback:function(e){t.hostSeed=e},expression:"hostSeed"}}),s("q-tooltip",[t._v("Seed for the random number generator.")])],1),s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{dense:"",icon:"mdi-dice-multiple",flat:"","no-caps":""},on:{click:t.randomizeSeed}},[s("q-tooltip",[t._v("Randomize the seed & regenerate the map.")])],1)],1)],1),s("q-item",[s("q-item-section",[s("q-btn",{attrs:{label:"Host",flat:"","no-caps":"",disable:!t.canHost},on:{click:t.hostMatch}},[s("q-tooltip",[t._v("Host with the given settings.")])],1)],1)],1)],1),s("q-expansion-item",{attrs:{group:"matchmaking",label:"Join",dark:t.darkMode},model:{value:t.joinExpanded,callback:function(e){t.joinExpanded=e},expression:"joinExpanded"}},[s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Password",error:!t.joinPasswordValid,disable:!!t.game.isJoining},model:{value:t.joinPassword,callback:function(e){t.joinPassword=e},expression:"joinPassword"}})],1)],1),t.game.isJoining?s("q-item",[s("q-item-section",[t._v("Joining match, please wait...")])],1):0===Object.keys(t.game.openMatches).length?s("q-item",[s("q-item-section",[t._v("Searching for matches, please wait...")])],1):t._e()],1)]:"lobby"===t.game.state?[s("q-item-label",{staticClass:"text-center text-bold",attrs:{header:""}},[t._v("Lobby")]),s("q-item-label",{attrs:{header:""}},[t._v("Match info")]),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v("Name:")]),s("q-item-section",[t._v(t._s(t.game.netMatch.matchName))])],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v("Max. players:")]),s("q-item-section",[t._v(t._s(t.game.netMatch.maxPlayers))])],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v("End turn time limit:")]),s("q-item-section",[t._v(t._s(t.game.netMatch.endTurnTimeLimit)+"s")]),s("MatchmakingTooltip",{attrs:{type:"endTurnTimeLimit"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v("Checkpoints:")]),s("q-item-section",[t._v(t._s(t.game.netMatch.checkpointCount))]),s("MatchmakingTooltip",{attrs:{type:"checkpointCount"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v("Hand size:")]),s("q-item-section",[t._v(t._s(t.game.netMatch.handSize))]),s("MatchmakingTooltip",{attrs:{type:"handSize"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v("Slot count:")]),s("q-item-section",[t._v(t._s(t.game.netMatch.slotCount))]),s("MatchmakingTooltip",{attrs:{type:"slotCount"}})],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v("Seed:")]),s("q-item-section",[t._v(t._s(t.game.netMatch.seed))])],1),s("q-item-label",{attrs:{header:""}},[t._v("Players")]),t._l(t.match.players,(function(e,a){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a,staticClass:"pointer",attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{name:e.netKey===t.game.netKeyHost?"mdi-account-star":"mdi-account",color:e===t.match.playerSelf?"primary":"grey"}})],1),s("q-item-section",[t._v(t._s(e.name))]),t.game.isHost&&e!==t.match.playerSelf?s("q-item-section",{attrs:{side:""}},[s("q-btn",{attrs:{flat:"",icon:"mdi-exit-run"},on:{click:function(a){return t.kick(e)}}},[s("q-tooltip",[t._v("Kick player from lobby.")])],1)],1):t._e()],1)})),s("q-item",[s("q-item-section",[s("q-btn",{attrs:{label:"Leave",flat:"","no-caps":""},on:{click:t.leaveMatch}},[s("q-tooltip",[t._v("Leave the match.")])],1)],1)],1),t.game.isHost?s("q-item",[s("q-item-section",[s("q-btn",{attrs:{label:"Start match",flat:"","no-caps":"",disable:!t.canStartMatch},on:{click:t.startMatch}},[s("q-tooltip",[t._v("Start the match!")])],1)],1)],1):t._e()]:"reconnecting"===t.game.state?[s("q-item-label",{staticClass:"text-center text-bold",attrs:{header:""}},[t._v("Reconnecting")]),s("q-item",[s("q-item-section",[t._v("Trying to reconnect to match "+t._s(t.game.reconnectData?'"'+t.game.reconnectData.matchName+'"':"[Unknown name]")+", please wait...")])],1),s("q-item",[s("q-item-section",[s("q-btn",{attrs:{label:"Abort",flat:"","no-caps":""},on:{click:t.abortReconnect}},[s("q-tooltip",[t._v("Abort the reconnection attempt."),s("br"),t._v("You won't be able to try reconnecting again once you press this.")])],1)],1)],1)]:t._e()],2),t.joinExpanded&&"matchmaking"===t.game.state&&!t.game.isJoining?s("q-list",{staticClass:"drawer-scroll-content"},t._l(Object.values(t.game.openMatches),(function(e){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.matchUid,staticClass:"pointer",attrs:{dense:""},nativeOn:{click:function(a){return t.joinMatch(e.matchUid)}}},[s("q-item-section",{attrs:{side:""}},[s("q-icon",{attrs:{name:e.password?"mdi-lock":"mdi-lock-open"}}),s("q-tooltip",[t._v("You need "+t._s(e.password?"a":"no")+" password to join.")])],1),s("q-item-section",[t._v("\n            "+t._s(e.matchName)+"\n            "),s("q-tooltip",[t._v("\n              Host name: "+t._s(e.playerName)),s("br"),t._v("\n              End turn time limit: "+t._s(e.endTurnTimeLimit)+"s"),s("br"),t._v("\n              Checkpoints: "+t._s(e.checkpointCount)),s("br"),t._v("\n              Hand size: "+t._s(e.handSize)),s("br"),t._v("\n              Slot count: "+t._s(e.slotCount)),s("br"),t._v("\n              Seed: "+t._s(e.seed)+"\n            ")])],1),s("q-item-section",{attrs:{side:""}},[t._v("\n            "+t._s(e.playerCount)+"/"+t._s(e.maxPlayers)+"\n            "),s("q-tooltip",[t._v("Player count / Max. players")])],1)],1)})),1):t._e()],1)],1),s("q-drawer",{attrs:{"no-swipe-close":"",behavior:"desktop","content-class":t.bgClassDrawer,elevated:"",side:"right"},nativeOn:{mousedown:function(e){return t.onMousedown(e)}},model:{value:t.rightDrawerOpen,callback:function(e){t.rightDrawerOpen=e},expression:"rightDrawerOpen"}},[s("q-list",{staticClass:"drawer-list",attrs:{dark:t.darkMode}},[s("div",{staticClass:"drawer-head"},[s("q-item-label",{staticClass:"text-center text-bold",attrs:{header:""}},[t._v("About")]),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("div",{staticClass:"about"},[t._v("\n            Bolt Bots is a "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Free_and_open-source_software"}},[t._v("FOSS")]),t._v("\n            game with gameplay which is meant to loosely resemble that of the board game "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/RoboRally"}},[t._v("Robo Rally")]),t._v(".\n            It is currently a rather basic prototype which may be heavily extended in the (possibly distant) future.\n            You can find the MPL-2.0 licensed source code repository on "),s("a",{attrs:{href:"https://github.com/torss/boltbots"}},[t._v("GitHub")]),t._v(".\n          ")])])],1),s("q-item-label",{staticClass:"text-center text-bold",attrs:{header:""}},[t._v("\n          Network info\n          "),s("q-tooltip",[t._v("ID: "+t._s(t.game.netNodeIdStr))])],1),"matchmaking"===t.game.state?[s("q-item",{attrs:{dense:""}},[s("q-item-section",[t._v("Players online: "+t._s(t.game.playersOnlineCount))])],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[t._v("Connected peer count: "+t._s(t.game.connectedPeers.length))])],1),s("q-item",{attrs:{dense:""}},[s("q-item-section",[t._v("Discovered peer count: "+t._s(t.game.discoveredPeerCount)+"\n            "),s("q-tooltip",[t._v("This is a total over time.")])],1)],1)]:[s("q-item",{attrs:{dense:""}},[s("q-item-section",[t._v("Global network info is only updated during matchmaking.")])],1)],s("q-item-label",{staticClass:"text-center text-bold",attrs:{header:""}},[t._v("Match chat")]),s("q-item",{attrs:{dense:""}},[s("q-item-section",[s("q-input",{attrs:{dense:"",dark:t.darkMode,label:"Chat message",disable:"matchmaking"===t.game.state,error:!t.chatMessageValid},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendChatMessage(e)}},model:{value:t.chatMessage,callback:function(e){t.chatMessage=e},expression:"chatMessage"}})],1),s("q-tooltip",[t._v(t._s("matchmaking"===t.game.state?"Join a match to chat.":"Press enter to send your message."))])],1)],2),s("q-list",{staticClass:"drawer-scroll-content"},t._l(t.chatMessages,(function(e,a){return s("q-item",{key:a,attrs:{dense:""}},[s("q-item-section",{attrs:{side:""}},[t._v(t._s(e.playerName)+":")]),s("q-item-section",[t._v(t._s(e.text))])],1)})),1)],1)],1),s("q-page-container",[s("router-view")],1),s("q-dialog",{model:{value:t.dialogOpen,callback:function(e){t.dialogOpen=e},expression:"dialogOpen"}},[s("q-card",{class:t.classDialog,attrs:{dark:t.darkMode}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v(t._s(t.dialogTitle))])]),s("q-card-section",[t._v(t._s(t.dialogMessage))]),s("q-card-actions",{attrs:{align:"center"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.dialogCloseButtonLabel,"no-caps":"",color:"primary"}},[s("q-tooltip",[t._v("Click to close the dialog")])],1)],1)],1)],1)],1)},o=[],n=a("0967"),i=a("2b0e"),r=(t,e)=>{let a=window.open;if(!0===n["a"].is.cordova){if(void 0!==cordova&&void 0!==cordova.InAppBrowser&&void 0!==cordova.InAppBrowser.open)a=cordova.InAppBrowser.open;else if(void 0!==navigator&&void 0!==navigator.app)return navigator.app.loadUrl(t,{openExternal:!0})}else if(void 0!==i["a"].prototype.$q.electron)return i["a"].prototype.$q.electron.shell.openExternal(t);let s=a(t,"_blank");if(s)return s.focus(),s;e&&e()},l=a("1c16"),c=a("310e"),h=a.n(c),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],class:t.classMain,attrs:{dense:""},nativeOn:{click:function(e){return t.highlight(e)}}},[a("q-item-section",{staticClass:"items-center",attrs:{side:""}},[a("q-icon",{style:"color: #"+t.player.bot.guiColor.getHexString(),attrs:{name:"mdi-"+t.player.icon}}),a("q-rating",{attrs:{icon:"mdi-flag-variant",readonly:"",max:t.checkpointCount,size:"0.25em",color:"primary"},model:{value:t.player.completedCheckpoints,callback:function(e){t.$set(t.player,"completedCheckpoints",e)},expression:"player.completedCheckpoints"}}),a("q-tooltip",[t._v("Completed checkpoints out of the "+t._s(t.checkpointCount)+" total checkpoints."),a("br"),t._v("The checkpoints have to be completed in order,"),a("br"),t._v("and your bot must land directly on a checkpoint for it to be completed."),a("br"),t._v("Completing all checkpoints wins you the game!")])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-item-label",{staticClass:"player-name",class:t.className},[t._v("\n      "+t._s(t.player.name)+"\n      ")])],1),t.player.alive?[a("q-item-section",[a("q-linear-progress",{staticStyle:{height:"20px"},attrs:{stripe:"",rounded:"",value:t.player.bot.health,color:"red"}}),a("q-tooltip",[t._v("Bot health: "+t._s((100*t.player.bot.health).toFixed(0))+"%")])],1),a("q-item-section",{attrs:{side:""}},[a("span",[t.player.alive?a("q-item-label",{staticClass:"tower-distance"},[t._v(t._s(t.player.bot.towerDistance.toFixed(2))+"m")]):a("q-item-label",{staticClass:"tower-distance-dead"},[t._v("☠️")]),a("q-tooltip",[t._v("Distance to control tower.")])],1)])]:a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[t._v("\n      Killed in turn "+t._s(t.player.killedInTurn)+" by "+t._s(t.player.killedBy.map((function(t){return t.name})).join(" & "))+".\n    ")])],1),a("q-tooltip",[t._v("\n    Click to briefly highlight the player's bot."),a("br"),t.isSelf?[t._v("\n      You are this player. "),t.isHost?[t._v("And you are the host.")]:t._e()]:t.isHost&&!t.timeout?[t._v("\n      This player is your current host.\n    ")]:t._e(),(t.isSelf||t.isHost)&&(t.timeout||t.endTurn||t.completeTurn)?[a("br"),a("br")]:t._e(),t.timeout?[t._v("\n      Seems like this player is timing out!"),a("br"),t._v("\n      The game might wait a bit to give the player a chance to reconnect."),a("br"),t.isHost?[t._v("\n        And since that player was host, a new host is being elected, please wait."),a("br")]:t._e(),t._v("\n      If the player doesn't come back you can keep playing, his bot will simply remain uncontrolled.\n    ")]:t.completeTurn?[t._v("\n      This player has watched the turn play out.\n    ")]:t.endTurn?[t._v("\n      This player has ended his turn.\n    ")]:t._e()],2)],2)},m=[],u=a("abf7"),p={name:"PlayerListItem",props:{player:Object},data(){return{glos:u["a"]}},methods:{highlight(){this.player.bot&&this.player.bot.highlight()}},computed:{checkpointCount(){return this.glos.game?this.glos.game.match.checkpointCount:0},isHost(){return this.player.netKey===this.glos.game.netKeyHost},isSelf(){return this.player.netKey===this.glos.game.netKey},endTurn(){return this.player.endTurn},completeTurn(){return this.player.completeTurn},timeout(){return!!this.player.lastPingTimeout},className(){return{"player-name-dead":this.player.left||!this.player.alive,"player-name-done":this.endTurn}},classMain(){return{"complete-turn":this.completeTurn,timeout:this.timeout}}}},g=p,v=(a("50f4"),a("2877")),y=Object(v["a"])(g,d,m,!1,null,"48303cc1",null),b=y.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-tooltip",["endTurnTimeLimit"===t.type?[t._v("\n    This time (in seconds) will start to run out once a player has finished his turn."),a("br"),t._v("\n    If the other players can't end their turns within this time limit, it will end automatically."),a("br"),t._v("\n    Set this to 0 to disable the time limit.\n  ")]:"checkpointCount"===t.type?[t._v("\n    How many checkpoints need to be reached by a player to attain a checkpoint victory."),a("br"),t._v("\n    These checkpoints have to be travesed in the correct order."),a("br"),t._v("\n    Note that victory can alternatively be achieved by destroying all other bots.\n  ")]:"handSize"===t.type?[t._v("\n    How many cards each player can hold on his hand per turn."),a("br"),t._v("\n    This thus changes the amount of options each player will have available.\n  ")]:"slotCount"===t.type?[t._v("\n    The number of card slots each player's bot has."),a("br"),t._v("\n    A turn consists out of executing the slots."),a("br"),t._v("\n    More slots will make it more difficult to predict the turn. Conversely, less slots make it easier to react to the other players' actions.\n  ")]:t._e()],2)},_=[],q={name:"MatchmakingTooltip",props:{type:String}},f=q,M=Object(v["a"])(f,k,_,!1,null,"c40c7136",null),w=M.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-circular-progress",{staticClass:"hold-btn",attrs:{"show-value":"","font-size":"0.5em",value:t.progress,max:1,"center-color":t.error?"negative":t.centerColor,"track-color":t.trackColor,color:t.color},on:{mousedown:t.start,mouseleave:t.stop,mouseup:t.stop,touchstart:t.start,touchend:t.stop,touchcancel:t.stop}},[t._t("default")],2)},x=[],T={name:"HoldBtn",props:{error:{type:Boolean,default:!1},incrementMs:{type:Number,default:1500},decrementMs:{type:Number,default:1e3},intervalMs:{type:Number,default:100},cooldownMs:{type:Number,default:500},centerColor:{type:String,default:"inset-1"},trackColor:{type:String,default:"inset-2"},color:{type:String,default:"white"}},data(){return this.$intervalInc=void 0,this.$intervalDec=void 0,{progress:0}},methods:{start(t){const e=!!t.shiftKey;this.error||this.$intervalInc||(this.clearIntervalDec(),this.$intervalInc=setInterval(()=>{const t=e?this.incrementFast:this.increment;this.progress=Math.min(this.progress+t,1),1===this.progress&&(this.clearIntervalInc(!0),setTimeout(()=>{this.$intervalInc=void 0,this.progress=0,this.error||this.$emit("trigger")},this.cooldownMs))},this.intervalMs))},stop(){this.clearIntervalInc(),this.$intervalDec||(this.$intervalDec=setInterval(()=>{this.progress=Math.max(this.progress-this.decrement,0),0===this.progress&&this.clearIntervalDec()},this.intervalMs))},clearIntervalInc(t){clearInterval(this.$intervalInc),this.$intervalInc=t},clearIntervalDec(){clearInterval(this.$intervalDec),this.$intervalDec=void 0}},computed:{incrementFast(){return this.intervalMs/250},increment(){return this.intervalMs/this.incrementMs},decrement(){return this.intervalMs/this.decrementMs}}},S=T,P=(a("c84d"),Object(v["a"])(S,C,x,!1,null,"5bf01c60",null)),D=P.exports,N={name:"MainLayout",components:{draggable:h.a,PlayerListItem:b,MatchmakingTooltip:w,HoldBtn:D},data(){return this.regenerateMapDebounced=Object(l["a"])(()=>this.regenerateMap(),1e3),this.recreatePlayersDebounced=Object(l["a"])(()=>this.recreatePlayers(),100),{bgClassDark:"bg-blue-grey-10",glos:u["a"],hostPassword:"",hostSeedLastGen:u["a"].hostSeed,joinPassword:"",chatMessage:"",dialogCloseButtonLabel:"Ok",dialogOpen:!1}},methods:{openURL:r,useCard(t){for(const e of u["a"].cardSlots)if(!e.card)return e.card=t,void t.removeFromHand()},dragCard(t){u["a"].dragged=t},dragCardStop(){u["a"].dragged=void 0},randomizeSeed(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",e=8+Math.floor(16*Math.random());let a="";for(let s=0;s<e;++s)a+=t[Math.floor(Math.random()*t.length)];this.hostSeed=a,this.regenerateMap()},regenerateMap(){this.canMapGen&&(this.hostSeed===this.hostSeedLastGen&&this.hostCheckpointCount===this.match.checkpointCount||(this.hostSeedLastGen=this.hostSeed,u["a"].game.ready&&u["a"].game.regenerateMap()))},recreatePlayers(){this.canMapGen&&u["a"].game.recreatePlayers()},hostMatch(){this.canHost&&u["a"].game.host({playerName:this.playerName,matchName:this.hostMatchName,password:this.hostPassword,maxPlayers:Math.floor(this.hostMaxPlayers),seed:this.hostSeed,endTurnTimeLimit:this.hostEndTurnTimeLimit,checkpointCount:this.hostCheckpointCount,handSize:this.hostHandSize,slotCount:this.hostSlotCount})},joinMatch(t){this.playerNameValid&&this.joinPasswordValid&&u["a"].game.tryJoin(t,this.playerName,this.joinPassword)},leaveMatch(){u["a"].game.leave()},kick(t){u["a"].game.kick(t)},startMatch(){this.canStartMatch&&u["a"].game.startMatch()},abortReconnect(){u["a"].game.clearReconnectData()},sendChatMessage(){if(!this.chatMessageValid||""===this.chatMessage)return;const t=this.chatMessage;this.chatMessage="",u["a"].game.sendChatMessage(t)},clickPlayer(t){},toggleRightDrawer(){this.rightDrawerOpen=!this.rightDrawerOpen,this.rightDrawerOpen&&(u["a"].game.newChatMessages=!1)},checkName(t,e=8){return t.length>0&&t.length<=e},checkShortText(t,e=64){return t.length<=e},checkIntRange(t,e,a){return t=Math.floor(t),t>=e&&t<=a},onMousedown(){u["a"].threejsControls&&(u["a"].threejsControls.enabled=!1),document.addEventListener("mouseup",()=>this.onMouseup(),{once:!0,capture:!0})},onMouseup(){u["a"].threejsControls&&(u["a"].threejsControls.enabled=!0)},toggleAudio(){u["a"].muteAudio=!u["a"].muteAudio,u["a"].muteAudio&&u["a"].game.audioListener.context.resume()}},computed:{game(){return this.glos.game},match(){return this.game&&this.glos.game.match},hand(){return this.glos.hand},alive(){return this.match&&this.match.playerSelf.alive},openTileCount(){return this.match?this.match.openTileCount:0},chatMessages(){return this.game?this.game.chatMessages:[]},players(){return this.match?this.match.turnPlayers:[]},deadPlayers(){return this.match?this.match.deadPlayers:[]},turn(){return this.match?u["a"].game.match.turn:1},disableAct(){return this.match&&(this.match.turnInProgress||!!this.match.gameOver||this.match.playerSelf.endTurn||!this.alive)},handSize(){return u["a"].game.match&&u["a"].game.match.handSize},bgClassDrawer(){return this.darkMode?this.bgClassDark:"bg-grey-2"},bgClassHeader(){return this.darkMode?this.bgClassDark:"bg-primary"},classDialog(){return this.bgClassDrawer},playerNameValid(){return this.checkName(this.playerName)},hostMatchNameValid(){return this.checkName(this.hostMatchName,28)},hostPasswordValid(){return this.checkShortText(this.hostPassword)},joinPasswordValid(){return this.checkShortText(this.joinPassword)},hostSeedValid(){return this.checkShortText(this.hostSeed)},chatMessageValid(){return this.chatMessage.length<=120},hostEndTurnTimeLimitValid(){return this.hostEndTurnTimeLimit>=0},hostMaxPlayersValid(){return this.checkIntRange(this.hostMaxPlayers,2,Math.min(this.openTileCount,32))},hostCheckpointCountValid(){return this.checkIntRange(this.hostCheckpointCount,1,5)},hostHandSizeValid(){return this.checkIntRange(this.hostHandSize,1,16)},hostSlotCountValid(){return this.checkIntRange(this.hostSlotCount,1,8)},canMapGen(){return this.hostMaxPlayersValid&&this.hostCheckpointCountValid&&this.hostSeedValid},canHost(){return this.playerNameValid&&this.hostMatchNameValid&&this.hostPasswordValid&&this.hostMaxPlayersValid&&this.hostSeedValid&&this.hostEndTurnTimeLimitValid&&this.hostCheckpointCountValid&&this.hostHandSizeValid&&this.hostSlotCountValid},canStartMatch(){return this.match.players.length>=2},dialogTitle(){const{dialogData:t}=this.glos;if(!t)return"";const e={"join-failure":"Couldn't join match"};return e[t.type]||"Dialog"},dialogMessage(){const{dialogData:t}=this.glos;if(!t)return"";const e={"join-failure":{"empty-password":"You need to enter a password to join this match.",rejected:()=>{const e={"wrong-password":"The password you entered was wrong.","match-closed":"The match is no longer available."};return e[t.data]}}};let a=e[t.type];return a=a&&a[t.why],"function"===typeof a&&(a=a()),a||""},...["leftDrawerOpen","rightDrawerOpen","playerName","hostMatchName","hostMaxPlayers","hostSeed","darkMode","hostExpanded","joinExpanded","hostEndTurnTimeLimit","hostCheckpointCount","hostHandSize","hostSlotCount"].reduce((t,e)=>{return t[e]={get(){return u["a"][e]},set(t){u["a"][e]=t,localStorage.setItem(e,t)}},t},{})},watch:{"glos.muteAudio"(t){localStorage.setItem("muteAudio",t),u["a"].adjustAudioVolume()},"glos.masterVolume"(t){localStorage.setItem("masterVolume",t),u["a"].adjustAudioVolume()},hostSeed(t){this.regenerateMapDebounced()},hostMaxPlayers(t){this.recreatePlayersDebounced()},hostCheckpointCount(t){this.regenerateMapDebounced()},"glos.dialogData"(t){const e=t=>t[Math.floor(Math.random()*t.length)],a=t=>{let a=e(t);while(a)if("function"===typeof a)a=a();else{if(!Array.isArray(a))return a;a=e(a)}console.warn("glos.dialogData - resolve error")},s=()=>{const t=e(["Thank you","Thanks","My heartfelt thanks","Many thanks","A thousand thanks","Cordial thanks","Thanks a lot","Thanks a million","Thank you very much","Thanks a ton","Thanks again","Thx","TANK you"]),a=e(["Sir","Lord","Mr.","Ms."]),s=e(["can","may","are allowed to","are permitted to"]),o=e(["go","leave"]),n=e(["",".","!","¡"]);return`${t} ${a} Dialog, you ${s} ${o} now${n}`},o=[["Damn","Damn it","Whatever","Whatevs","Fine","That's not good","That's bad"],["Oops","¯\\_(ツ)_/¯","What a pity","Too bad"],["😖","😲","😯","😮","🤨","🤔","😱","👎"]],n=[["Ok","OK","K","👌"],["Affirmative","Alright","Understood","Got it"],...o,s];this.dialogCloseButtonLabel=a(n)||"Ok",this.dialogOpen=!0}}},V=N,O=(a("546f"),a("89db"),Object(v["a"])(V,s,o,!1,null,"a42bb0aa",null));e["default"]=O.exports},"89db":function(t,e,a){"use strict";var s=a("df2d"),o=a.n(s);o.a},c84d:function(t,e,a){"use strict";var s=a("5b45"),o=a.n(s);o.a},cad7:function(t,e,a){},df2d:function(t,e,a){}}]);